<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>The Nexus Terminal</title>
    <link rel="icon" href="logo.jpg" type="image/jpeg" />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=VT323&display=swap"
    />
    <link rel="stylesheet" href="styles/main.css" />
  </head>
  <body>
    <div class="scanlines"></div>
    <video
      id="sentryVideo"
      class="sentry-video"
      autoplay
      muted
      playsinline
    ></video>
    <div id="reticle" class="reticle"></div>
    <div id="netGhost" class="net-ghost">
      <div class="ghost-header">
        <span class="ghost-dot"></span>
        NET GHOST PROBE
      </div>
      <div id="ipLine">IP: LOADING...</div>
      <div id="locLine">LOC: UNKNOWN</div>
      <div id="latencyLine">LATENCY: 24ms</div>
    </div>

    <div class="app">
      <header>
        <button
          id="settingsBtn"
          class="settings-btn"
          type="button"
          aria-label="设置"
        >
          ?
        </button>
        <h1>The Nexus Terminal</h1>
        <p>神经核心终端 · 挥发记忆池与密码信道并行运行</p>
        <div class="command-center">
          <div id="arcReactor" class="arc-reactor"></div>
          <button id="micBtn" class="mic-btn" type="button">MIC</button>
        </div>
        <div class="hud-panels">
          <div class="hud-panel">
            <div class="hud-title">SYSTEMS</div>
            <div id="batteryLine" class="hud-line">BATTERY: --</div>
            <div id="chargeLine" class="hud-line">STATUS: --</div>
            <div id="cpuLine" class="hud-line">CPU CORES: --</div>
          </div>
          <div class="hud-panel">
            <div class="hud-title">ENV SENSORS</div>
            <div id="tempLine" class="hud-line">TEMP: --</div>
            <div id="windLine" class="hud-line">WIND: --</div>
            <div id="coordLine" class="hud-line">COORD: --</div>
          </div>
        </div>
        <div class="sentry-control">
          <button id="sentryToggle" class="btn secondary sentry-toggle" type="button">
            SENTRY
          </button>
          <span id="sentryStatus" class="sensor-status">SENTRY: OFF</span>
        </div>
      </header>

      <div class="grid">
        <section class="panel">
          <h2>Volatile Memory Pool / 挥发记忆池</h2>
          <div class="memory-input">
            <input
              id="memoryInput"
              type="text"
              placeholder="输入内容后按 Enter 保存..."
              autocomplete="off"
            />
            <button id="addMemory">写入</button>
          </div>
          <div class="memory-hint">左键复制 · 右键删除 · QR 同步</div>
          <div id="memoryGrid" class="data-grid"></div>
        </section>

        <div class="right-stack">
          <section class="panel">
          <h2>Cipher Channel / 密码信道</h2>
          <div class="cipher-tabs panel-tabs">
            <button class="tab-btn panel-tab active" data-panel="cipher">
              CIPHER
            </button>
            <button class="tab-btn panel-tab" data-panel="transmute">
              TRANSMUTE
            </button>
          </div>

          <div id="cipherPanel" class="mode-panel active">
            <div class="cipher-tabs">
              <button class="tab-btn cipher-tab active" data-mode="inject">
                INJECT
              </button>
              <button class="tab-btn cipher-tab" data-mode="extract">
                EXTRACT
              </button>
            </div>

            <div id="injectPanel" class="mode-panel active">
              <div class="field">
                <label>1. 上传载体图片</label>
                <div class="file-actions">
                  <label class="btn file-label">
                    选择图片
                    <input
                      id="injectFile"
                      class="file-input"
                      type="file"
                      accept="image/*"
                    />
                  </label>
                  <button id="injectClear" class="btn secondary" type="button">
                    清除
                  </button>
                </div>
                <div id="injectCapacity" class="memory-hint"></div>
                <img id="injectPreview" class="preview hidden" alt="预览" />
              </div>
              <div class="field">
                <label>2. 输入需要隐藏的文本</label>
                <textarea
                  id="secretInput"
                  placeholder="在这里输入秘密讯息..."
                ></textarea>
              </div>
              <button id="injectBtn">注入并生成</button>
              <a
                id="downloadLink"
                class="download-link disabled"
                href="#"
                download
              >
                下载隐写图像
              </a>
            </div>

            <div id="extractPanel" class="mode-panel">
              <div class="field">
                <label>1. 上传已注入的图片</label>
                <div class="file-actions">
                  <label class="btn file-label">
                    选择图片
                    <input
                      id="extractFile"
                      class="file-input"
                      type="file"
                      accept="image/*"
                    />
                  </label>
                  <button id="extractClear" class="btn secondary" type="button">
                    清除
                  </button>
                </div>
              </div>
              <div class="field">
                <label>2. 解析出的隐藏内容</label>
                <div id="extractOutput" class="output">等待图像输入...</div>
              </div>
            </div>
          </div>

          <div id="transmutePanel" class="mode-panel">
            <div class="field">
              <label>Raw Data Input / 原始数据输入</label>
              <textarea
                id="transmuteInput"
                placeholder="输入文本以转译..."
              ></textarea>
            </div>
            <div class="transmute-grid">
              <div class="field">
                <label>Hexadecimal / 十六进制</label>
                <div id="hexOutput" class="trans-output"></div>
              </div>
              <div class="field">
                <label>Binary / 二进制</label>
                <div id="binOutput" class="trans-output"></div>
              </div>
              <div class="field">
                <label>Base64 / 编码</label>
                <div id="base64Output" class="trans-output"></div>
              </div>
            </div>
          </div>
        </section>
          <section class="panel neural-panel">
            <div class="panel-title-row">
              <h2>Neural Uplink / 神经上行</h2>
              <span class="panel-tag">AI</span>
            </div>
            <div id="aiLog" class="ai-log"></div>
            <div class="ai-input">
              <input
                id="aiInput"
                type="text"
                placeholder="输入指令或问题，Enter 发送..."
                autocomplete="off"
              />
              <button id="aiSend" class="btn secondary" type="button">
                发送
              </button>
            </div>
            <div class="ai-hint">
              关键词指令将直接执行，其余请求接入 AI。
            </div>
          </section>
          <section class="panel protocols-panel">
            <h2>Battle Protocols / 作战协议</h2>
            <div class="protocol-grid">
              <button class="btn protocol-btn" type="button" data-protocol="academic">
                PROTOCOL: ACADEMIC
              </button>
              <button class="btn protocol-btn" type="button" data-protocol="command">
                PROTOCOL: COMMAND
              </button>
              <button class="btn protocol-btn" type="button" data-protocol="total">
                PROTOCOL: TOTAL WAR
              </button>
            </div>
            <div id="popupWarning" class="popup-warning hidden">
              PLEASE ALLOW POPUPS FOR THIS DOMAIN
            </div>
          </section>
        </div>
      </div>
    </div>

    <div id="toast" class="toast">COPIED</div>

    <div id="qrModal" class="modal" aria-hidden="true">
      <div id="qrPanel" class="modal-panel" role="dialog" aria-modal="true">
        <button id="qrClose" class="btn secondary modal-close" type="button">
          X
        </button>
        <h3>Glitch QR Bridge</h3>
        <p>扫描以同步数据块。</p>
        <img id="qrImage" class="qr-image" alt="QR Code" />
        <div id="qrText" class="qr-text"></div>
      </div>
    </div>

    <div id="settingsModal" class="modal" aria-hidden="true">
      <div id="settingsPanel" class="modal-panel" role="dialog" aria-modal="true">
        <button id="settingsClose" class="btn secondary modal-close" type="button">
          X
        </button>
        <h3>Neural Uplink Settings</h3>
        <p>配置 API 端点与密钥，内容仅保存于本地。</p>
        <div class="field">
          <label>API Endpoint</label>
          <input
            id="apiEndpoint"
            type="text"
            placeholder="https://api.deepseek.com or https://api.openai.com/v1/chat/completions"
          />
        </div>
        <div class="field">
          <label>API Key</label>
          <input id="apiKey" type="password" placeholder="sk-..." autocomplete="off" />
        </div>
        <div class="field">
          <label>Model</label>
          <input
            id="apiModel"
            type="text"
            placeholder="deepseek-chat / gpt-3.5-turbo"
          />
        </div>
        <button id="saveSettings" class="btn" type="button">保存配置</button>
      </div>
    </div>

    <div id="overrideModal" class="override-modal" aria-hidden="true">
      <div class="override-panel">
        <div class="override-title">
          SYSTEM OVERRIDE DETECTED. WELCOME, CREATOR from YUNNAN MINZU UNIVERSITY.
          ACCESS GRANTED.
        </div>
        <div style="margin-top: 16px">
          <button id="overrideClose" class="btn secondary" type="button">
            关闭
          </button>
        </div>
      </div>
    </div>

    <div id="deployOverlay" class="deploy-overlay">DEPLOYING...</div>

    <footer class="sonic-footer">
      <canvas id="sonicCanvas"></canvas>
      <div class="footer-label">SONIC VISUALIZER</div>
      <div class="footer-controls">
        <button id="audioToggle" class="btn footer-btn" type="button">
          INITIALIZE AUDIO
        </button>
        <div id="audioStatus" class="audio-status">AUDIO: OFFLINE</div>
      </div>
    </footer>

    <canvas id="stegCanvas" hidden></canvas>

    <script src="scripts/core.js" defer></script>
    <script src="scripts/voice.js" defer></script>
    <script src="scripts/audio.js" defer></script>
    <script src="scripts/clipboard.js" defer></script>
    <script src="scripts/cipher.js" defer></script>
    <script src="scripts/hud.js" defer></script>
    <script src="scripts/ai.js" defer></script>
    <script src="scripts/protocols.js" defer></script>
    <script src="scripts/konami.js" defer></script>
    <script src="scripts/init.js" defer></script>
  </body>
</html>

